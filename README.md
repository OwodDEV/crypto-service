# crypto-service

## Загальна інформація

API-сервіс надає функціональність для взаємодії з токенами USDT на блокчейнах Ethereum (ERC20) і Tron (TRC20).

Реалізований функціонал
- отримання балансу гаманця;
- отримання деталей транзакції;

## Налаштування

### Змінні середовища

Сервіс підтримує можливість використання `.env` файлу.

| Змінна                               | Опис                                                                          | Приклад                                  |
| ------------------------------------ | ----------------------------------------------------------------------------- | ---------------------------------------- |
| `CRYPTOSERVICE_ETHEREUM_RPCENDPOINT` | URL для доступу до Ethereum RPC (для Ethereum мережі використовується Infura) | `https://mainnet.infura.io/v3/{API_KEY}` |
| `CRYPTOSERVICE_TRON_RPCENDPOINT`     | URL для доступу до RPC для мережі Tron.                                       | `grpc.trongrid.io:50051`                 |
| `CRYPTOSERVICE_CACHE_HOST`           | Адреса хоста для підключення до кешу                                          | `localhost`                              |
| `CRYPTOSERVICE_CACHE_PORT`           | Порт для підключення до кешу                                                  | `6379`                                   |
| `CRYPTOSERVICE_CACHE_PASSWORD`       | Пароль для підключення до кешу (якщо використовується)                        |                                          |

> Зверніть увагу: `docker-compose.yml` вже містить змінні середовища для підключення до кешу (redis)

### Файл конфігурацій

Шлях за замовченням:  `./configs/app.yml`

Важливі налаштування, які можуть потребувати змін:
- ротація лог файлів (за замовченням: максимальний розмів файлу 10mb, зберігає 5 бекапів у .gz архівах протягом останніх 30 днів);
- порт запуску сервісу (за замовченням: 8080);
- TTL кешу для балансів (за замовченням: 60 секунд);

## Запуск

Для запуску сервісу використовуйте наступні команди:
1.  Запуск сервісу локально:
```
make run
```

2.  Запуск сервісу за допомогою Docker: 
```
make docker-build
make docker-up
```

Після запуску REST API буде доступний на порту `:8080`

### Метріки Prometheus

API включає інтеграцію з Prometheus. Метріки доступні за шляхом: 

http://localhost:8080/metrics

## Документація

Адреса для доступу до документації API через Swagger:

http://localhost:8080/swagger/index.html

## Додаткова інформація

- Для доступу до Ethereum необхідно використовувати Infura або інший RPC сервер.
- Для взаємодії з мережею Tron використовується стандартний RPC сервіс TronGrid.
- Примітка: Логи виводяться в зазначену директорію, і ви повинні налаштувати її доступність для Docker (якщо ви використовуєте контейнеризацію).
